<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Snackliste</title>
<style>
:root { --bg:#000; --text:#fff; --card:#fff; --muted:#888; }
* { box-sizing:border-box; }
body {
  margin:0; background:var(--bg); color:var(--text);
  font-family: Arial, Helvetica, sans-serif;
  min-height:100vh; display:flex; flex-direction:column;
  -webkit-font-smoothing:antialiased;
}
/* Header (3 Logos) */
.header{
  display:flex; justify-content:space-between; align-items:center;
  padding:12px 16px; gap:12px; border-bottom:1px solid rgba(255,255,255,.12);
}
.header img{ height:80px; width:auto; object-fit:contain; transition:opacity .3s ease; }
@media (max-width:750px){ .header img{ height:44px; } }
@media (max-width:480px){ .header img{ height:40px; } }

/* Inhalt */
.wrap{ flex:1; display:flex; flex-direction:column; align-items:center; gap:16px; padding:16px; }
.toolbar{
  width:95%; max-width:960px; display:flex; justify-content:space-between; align-items:center;
  gap:12px; margin-top:6px; flex-wrap:wrap;
}
.toolbar .info { color:var(--muted); }
.toolbar .row { display:flex; gap:10px; align-items:center; }

/* Termin hinzufügen */
.add-box{
  width:95%; max-width:960px; background:var(--card); color:#111;
  border-radius:12px; box-shadow:0 4px 16px rgba(0,0,0,.35);
  padding:12px; display:flex; flex-wrap:wrap; align-items:center; gap:10px;
}
.add-box label{ font-weight:bold; }
.add-box input[type="date"]{ padding:10px; border:1px solid #ddd; border-radius:10px; }

.btn {
  background:#000; color:#fff; border:none; border-radius:12px;
  padding:10px 14px; cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,.35);
}
.btn.secondary { background:#666; }
.btn[disabled]{ opacity:.6; cursor:default; }
.select { background:#fff; color:#111; border:1px solid #ddd; border-radius:10px; padding:8px 10px; }

.msg{
  width:95%; max-width:960px; min-height:40px; background:#fff; color:#111;
  border-radius:8px; display:flex; align-items:center; padding:8px 10px;
}
.msg.ok{ background:#e7ffe7; }
.list{ width:95%; max-width:960px; display:grid; gap:12px; grid-template-columns: 1fr; }
.card{
  background:var(--card); color:#111; border-radius:12px; box-shadow:0 4px 16px rgba(0,0,0,.35);
  padding:14px; display:grid; grid-template-columns: 1.2fr 1fr auto; gap:12px; align-items:center;
}
.date { font-weight:bold; }
.assignee { color:#333; }
.free { color:#0a7f00; font-weight:bold; }
.note-input { width:100%; border:1px solid #ddd; border-radius:8px; padding:8px; }

/* Home-Button */
.home-btn{
  position:fixed; left:18px; bottom:18px; border:none; background:#fff; color:#000;
  border-radius:50%; padding:10px; cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,.35); z-index:1000;
}
.home-btn img{ width:32px; height:32px; display:block; }
@media (max-width:720px){ .card{ grid-template-columns: 1fr; } }

/* Debug Panel */
.debug-panel{
  width:95%; max-width:960px; background:#111; color:#eee;
  border:1px dashed #888; border-radius:10px; padding:12px; white-space:pre-wrap;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size:12px; line-height:1.5;
}
.debug-panel .ok{ color:#9f9; }
.debug-panel .warn{ color:#ff9; }
.debug-panel .err{ color:#f99; }
</style>
</head>
<body>
  <!-- Header -->
  <div class="header" id="header">
    <img id="logo-left" src="logos/master/logo-left.jpg" alt="Logo links">
    <img id="logo-center" src="logos/master/logo-center.jpg" alt="Logo Mitte">
    <img id="logo-right" src="logos/master/logo-right.jpg" alt="Logo rechts">
  </div>

  <div class="wrap">
    <div class="toolbar">
      <h2>Snackliste</h2>
      <div class="row">
        <div class="info" id="userInfo"></div>

        <!-- Schulwahl (nur falls mehrere erlaubt sind) -->
        <button class="btn secondary" id="chooseSchoolBtn" style="display:none;">Schule wählen</button>
        <select id="schoolSelect" class="select" style="display:none; min-width:180px;"></select>

        <!-- Debug -->
        <button class="btn secondary" id="debugBtn" style="display:none;">Debug</button>
      </div>
    </div>

    <!-- Termin hinzufügen -->
    <div class="add-box">
      <label for="datePicker">Neuen Termin hinzufügen (nur Freitag oder Sonntag):</label>
      <input type="date" id="datePicker" />
      <button class="btn" id="addBtn">Termin hinzufügen</button>
      <button class="btn secondary" id="nextFriBtn">Nächster Freitag</button>
      <button class="btn secondary" id="nextSunBtn">Nächster Sonntag</button>
    </div>

    <div id="msg" class="msg"></div>

    <!-- Debug Panel -->
    <div id="debugPanel" class="debug-panel" style="display:none;"></div>

    <div class="list" id="list"></div>
  </div>

  <!-- Home -->
  <button class="home-btn" onclick="location.href='hauptseite.html'">
    <img src="home.jpg" alt="Home">
  </button>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore-compat.js"></script>
  <!-- Zentrale Firebase-Config -->
  <script src="firebase-config.js"></script>

  <script>
  /* ========================= Firebase Init ========================= */
  if (!firebase.apps.length) firebase.initializeApp(window.firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();
  auth.setPersistence(firebase.auth.Auth.Persistence.SESSION);

  /* ========================= Header / Logos (lowercase Ordner) ========================= */
  function preloadAndSet(img, url, fallback){
    if (!img) return;
    const t = new Image();
    t.onload = ()=>{ img.src = url; img.style.opacity='1'; };
    t.onerror = ()=>{ if (fallback) img.src = fallback; };
    img.style.opacity = '0.3';
    t.src = url;
  }
  function applyHeaderBySchool(schoolLower){
    const left = document.getElementById('logo-left');
    const center = document.getElementById('logo-center');
    const right = document.getElementById('logo-right');
    const masterBase = 'logos/master';
    const key = String(schoolLower||'master').trim().toLowerCase();
    const base = key !== 'master' ? `logos/${key}` : masterBase;
    preloadAndSet(left, `${base}/logo-left.jpg`, `${masterBase}/logo-left.jpg`);
    preloadAndSet(center, `${base}/logo-center.jpg`, `${masterBase}/logo-center.jpg`);
    preloadAndSet(right, `${base}/logo-right.jpg`, `${masterBase}/logo-right.jpg`);
  }

  /* ========================= Konstante Schul-IDs (Firestore: lowercase) ========================= */
  const CANON_SCHOOLS = ['melsungen','guxhagen'];
  const DISPLAY = s => s.charAt(0).toUpperCase() + s.slice(1);

  // Fallback, falls Rollen kein schools-Array liefern
  const DEFAULT_SCHOOLS_BY_GROUP = {
    master: ['melsungen','guxhagen'],
    degenhardt: ['melsungen','guxhagen']
  };

  /* ========================= App-States ========================= */
  let CURRENT_SCHOOL_ID = 'melsungen'; // lowercase; wird im Login gesetzt
  const SNACKS = () => db.collection('snacks').doc(CURRENT_SCHOOL_ID).collection('items');

  /* ========================= Helpers ========================= */
  const $ = s => document.querySelector(s);
  const msg = (t, ok=false)=>{ const box=$("#msg"); box.textContent=t||" "; box.classList.toggle("ok",ok); };
  const z2 = n => String(n).padStart(2,"0");
  const toDateId = d => `${d.getFullYear()}-${z2(d.getMonth()+1)}-${z2(d.getDate())}`;
  const fmtDate = d => d.toLocaleDateString("de-DE",{weekday:"long", year:"numeric", month:"2-digit", day:"2-digit"});
  function startOfDay(d){ return new Date(d.getFullYear(), d.getMonth(), d.getDate()); }
  function nextWeekday(base, weekday){ const d=startOfDay(base); const diff=(weekday-d.getDay()+7)%7; d.setDate(d.getDate()+diff); return d; }

  /* ========================= Debug Mode ========================= */
  const DEBUG = new URLSearchParams(location.search).get('debug') === '1';
  const dbgPanel = () => document.getElementById('debugPanel');

  function dbgShow(show=true){
    const panel = dbgPanel(); if (!panel) return;
    panel.style.display = show ? 'block' : 'none';
  }
  function dbgLine(text, level=''){ const panel=dbgPanel(); if (!panel) return;
    const p=document.createElement('div'); if(level) p.className=level; p.textContent=text; panel.appendChild(p); }
  function dbgObj(label, obj){ const panel=dbgPanel(); if(!panel) return;
    const pre=document.createElement('pre'); pre.textContent=`${label}: ${JSON.stringify(obj,null,2)}`; panel.appendChild(pre); }

  async function dbgRunChecks(user, schoolIdLower){
    const panel = dbgPanel(); if (!panel) return;
    panel.innerHTML = ''; dbgShow(true);

    dbgLine('=== Snackliste Debug ===');
    dbgLine(`User: ${(user && (user.email||user.uid)) || '—'}`);
    dbgLine(`Aktive Schule (lowercase): ${schoolIdLower}`);
    dbgLine(`Pfad: snacks/${schoolIdLower}/items`);
    dbgLine('----------');

    // rollen/{uid}
    let roleData = {};
    try {
      const roleSnap = await db.collection('rollen').doc(user.uid).get();
      if (roleSnap.exists) roleData = roleSnap.data() || {};
      dbgObj('rollen/{uid}', roleData);
    } catch(e){ dbgLine(`rollen lesen: ${e.message}`, 'err'); }

    // Gruppe aus Rolle
    const groupName = String(roleData.group || roleData.school || '').trim();
    dbgLine(`Gruppe (aus Rolle): ${groupName || '—'}`);

    // Schulen/{group}
    let groupDoc = {};
    if (groupName){
      try{
        const g = await db.collection('Schulen').doc(groupName).get();
        if (g.exists) groupDoc = g.data() || {};
        dbgObj(`Schulen/${groupName}`, groupDoc);
      }catch(e){ dbgLine(`Schulen/${groupName} lesen: ${e.message}`, 'warn'); }
    }

    // erlaubte Schulen aggregieren
    const schoolsLegacy = []
      .concat(Array.isArray(groupDoc.School) ? groupDoc.School : (groupDoc.School ? [groupDoc.School] : []))
      .concat(Array.isArray(groupDoc.school) ? groupDoc.school : (groupDoc.school ? [groupDoc.school] : []))
      .concat(Array.isArray(groupDoc.schools) ? groupDoc.schools : (groupDoc.schools ? [groupDoc.schools] : []));
    const schoolsLcFromGroup = Array.isArray(groupDoc.schoolsLc) ? groupDoc.schoolsLc : [];

    const roleSchools = Array.isArray(roleData.schools) ? roleData.schools : (roleData.schools ? [roleData.schools] : []);
    const roleSchoolsLc = Array.isArray(roleData.schoolsLc) ? roleData.schoolsLc : [];

    dbgObj('erlaubt (legacy aus Schulen/*)', schoolsLegacy);
    dbgObj('erlaubt (schoolsLc aus Schulen/*)', schoolsLcFromGroup);
    dbgObj('erlaubt (schools aus rollen)', roleSchools);
    dbgObj('erlaubt (schoolsLc aus rollen)', roleSchoolsLc);

    const likelyAllowed =
      (groupName && (groupName.toLowerCase() === schoolIdLower || groupName === schoolIdLower))
      || schoolsLegacy.includes(schoolIdLower)
      || schoolsLcFromGroup.includes(schoolIdLower)
      || roleSchools.includes(schoolIdLower)
      || roleSchoolsLc.includes(schoolIdLower)
      || (String(groupName).toLowerCase() === 'master');

    dbgLine(`Prognose Zugriff: ${likelyAllowed ? 'JA' : 'NEIN'}`, likelyAllowed ? 'ok' : 'warn');
    dbgLine('----------');

    // Probe-Query mit date-Filter
    try{
      const today = new Date(); today.setHours(0,0,0,0);
      const q = db.collection('snacks').doc(schoolIdLower).collection('items')
        .where('date','>=',firebase.firestore.Timestamp.fromDate(today))
        .orderBy('date','asc').limit(1);
      const res = await q.get();
      if (res.empty) dbgLine('Probe Query (mit date-Filter): 0 Treffer','warn');
      else {
        dbgLine('Probe Query (mit date-Filter): mindestens 1 Treffer','ok');
        res.docs.forEach(d=> dbgObj(`Treffer ${d.id}`, d.data()));
      }
    }catch(e){ dbgLine(`Probe Query (mit date-Filter) FEHLER: ${e.message}`,'err'); }

    // Fallback-Query ohne Filter
    try{
      const res2 = await db.collection('snacks').doc(schoolIdLower).collection('items')
        .orderBy(firebase.firestore.FieldPath.documentId()).limit(3).get();
      if (res2.empty) dbgLine('Fallback Query (ohne Filter): 0 Dokumente','warn');
      else {
        dbgLine(`Fallback Query (ohne Filter): ${res2.size} Dokument(e)`,'ok');
        res2.docs.forEach(d=> dbgObj(`Doc ${d.id}`, d.data()));
      }
    }catch(e){ dbgLine(`Fallback Query (ohne Filter) FEHLER: ${e.message}`,'err'); }

    dbgLine('=== Ende Debug ===');
  }

  /* ========================= Termin-Buttons ========================= */
  $("#nextFriBtn").addEventListener("click", ()=>{
    const d=nextWeekday(new Date(),5);
    $("#datePicker").value = `${d.getFullYear()}-${z2(d.getMonth()+1)}-${z2(d.getDate())}`;
  });
  $("#nextSunBtn").addEventListener("click", ()=>{
    const d=nextWeekday(new Date(),0);
    $("#datePicker").value = `${d.getFullYear()}-${z2(d.getMonth()+1)}-${z2(d.getDate())}`;
  });

  $("#addBtn").addEventListener("click", async ()=>{
    const val = $("#datePicker").value;
    if (!val){ msg("Bitte ein Datum auswählen."); return; }
    const [Y,Mo,D] = val.split("-").map(n=>parseInt(n,10));
    const d = new Date(Y, Mo-1, D);
    const today = startOfDay(new Date());
    if (d < today){ msg("Datum darf nicht in der Vergangenheit liegen."); return; }
    const wd = d.getDay();
    if (!(wd===0 || wd===5)){ msg("Nur Freitag oder Sonntag sind erlaubt."); return; }
    const id = toDateId(d);
    const ref = SNACKS().doc(id);
    msg("Leeren Termin anlegen …");
    try{
      await db.runTransaction(async (tx)=>{
        const snap = await tx.get(ref);
        if (snap.exists) throw new Error("exists");
        tx.set(ref, {
          dateId: id,
          date: firebase.firestore.Timestamp.fromDate(d),
          updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        }, { merge: true });
      });
      msg("Termin angelegt.", true);
      $("#datePicker").value = "";
      renderList(auth.currentUser);
    }catch(e){
      msg(e.message==="exists" ? "Für dieses Datum existiert bereits ein Eintrag." : "Konnte Termin nicht anlegen.");
    }
  });

  /* ========================= Liste rendern ========================= */
  async function renderList(user){
    const container = $("#list");
    container.innerHTML = "";
    const today = startOfDay(new Date());

    let snap;
    try{
      const q = SNACKS()
        .where("date", ">=", firebase.firestore.Timestamp.fromDate(today))
        .orderBy("date", "asc")
        .limit(30);
      snap = await q.get();
    }catch(e){
      console.error('[Snackliste] Query-Fehler:', e);
      msg('Fehler beim Laden der Snackliste.', false);
      if (DEBUG) await dbgRunChecks(user, CURRENT_SCHOOL_ID);
      return;
    }

    if (snap.empty){
      if (DEBUG) await dbgRunChecks(user, CURRENT_SCHOOL_ID);
      msg("Noch keine Termine angelegt. Lege oben einen Freitag oder Sonntag an.");
      return;
    }

    msg("");

    snap.docs.forEach(doc=>{
      const data = doc.data();
      const date = data.date?.toDate ? data.date.toDate() : new Date(doc.id);

      const card = document.createElement("div");
      card.className = "card";

      const left = document.createElement("div");
      left.innerHTML = `
        <div class="date">${fmtDate(date)}</div>
        <div class="assignee">${
          data.assigneeName ? `Eingetragen: ${data.assigneeName}` : '<span class="free">Noch frei</span>'
        }</div>`;

      const middle = document.createElement("div");
      const note = document.createElement("input");
      note.className = "note-input";
      note.placeholder = "Optionale Notiz (z. B. Obst & Nüsse)";
      note.value = data.note || "";
      note.disabled = !(data.assigneeUid === (user && user.uid));
      middle.appendChild(note);

      const right = document.createElement("div");
      const btn = document.createElement("button");
      btn.className = "btn";
      if (!data.assigneeUid){
        btn.textContent = "Ich übernehme";
        btn.onclick = ()=> claimSlot(doc.id, date, note.value);
      } else if (user && data.assigneeUid === user.uid){
        btn.textContent = "Abgeben";
        btn.classList.add("secondary");
        btn.onclick = ()=> releaseSlot(doc.id);
        note.disabled = false;
        note.addEventListener("change", ()=>{
          SNACKS().doc(doc.id).update({
            note: note.value,
            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
          }).then(()=> msg("Notiz gespeichert.", true))
            .catch(()=> msg("Konnte Notiz nicht speichern."));
        });
      } else {
        btn.textContent = "Belegt";
        btn.disabled = true;
      }
      right.appendChild(btn);

      card.appendChild(left);
      card.appendChild(middle);
      card.appendChild(right);
      container.appendChild(card);
    });
  }

  /* ========================= Claim / Release ========================= */
  async function claimSlot(id, dateObj, noteValue){
    msg("Trage dich ein …");
    const user = auth.currentUser;
    if (!user){ location.href = "index.html"; return; }
    const ref = SNACKS().doc(id);
    try{
      await db.runTransaction(async (tx)=>{
        const snap = await tx.get(ref);
        if (snap.exists && snap.data().assigneeUid) throw new Error("bereits belegt");
        tx.set(ref, {
          assigneeUid: user.uid,
          assigneeName: user.displayName || user.email || "Unbekannt",
          note: noteValue || "",
          updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        }, { merge: true });
      });
      msg("Eingetragen – danke!", true);
    }catch(e){
      msg(e.message==="bereits belegt" ? "Dieser Termin wurde gerade belegt." : "Fehler beim Eintragen.");
    }finally{
      renderList(auth.currentUser);
    }
  }

  async function releaseSlot(id){
    msg("Gib Eintrag frei …");
    const user = auth.currentUser;
    if (!user){ location.href = "index.html"; return; }
    const ref = SNACKS().doc(id);
    try{
      await db.runTransaction(async (tx)=>{
        const snap = await tx.get(ref);
        if (!snap.exists) throw new Error("nicht vorhanden");
        const data = snap.data();
        if (data.assigneeUid !== user.uid) throw new Error("nicht-berechtigt");
        tx.update(ref, {
          assigneeUid: firebase.firestore.FieldValue.delete(),
          assigneeName: firebase.firestore.FieldValue.delete(),
          note: firebase.firestore.FieldValue.delete(),
          updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        });
      });
      msg("Freigegeben.", true);
    }catch(e){
      msg(e.message==="nicht-berechtigt" ? "Nur der eingetragene Nutzer kann freigeben." : "Konnte nicht freigeben.");
    }finally{
      renderList(auth.currentUser);
    }
  }

  /* ========================= Auth + Gruppen-/Schul-Logik ========================= */
  auth.onAuthStateChanged(async (user)=>{
    if (!user){ location.href = "index.html"; return; }

    const info = $("#userInfo");
    info.textContent = user.email || "";

    // Rollen lesen: erwartete Felder (anpassbar): group | school, schools | schoolsLc
    let group = '';
    let schoolsFromRole = [];
    let schoolsLcFromRole = [];
    try{
      const snap = await db.collection('rollen').doc(user.uid).get();
      if (snap.exists){
        const r = snap.data() || {};
        group = String(r.group || r.school || '').trim().toLowerCase(); // kompatibel
        if (Array.isArray(r.schools)){
          schoolsFromRole = r.schools.map(s => String(s||'').trim().toLowerCase());
        }
        if (Array.isArray(r.schoolsLc)){
          schoolsLcFromRole = r.schoolsLc.map(s => String(s||'').trim().toLowerCase());
        }
      }
    }catch(e){
      console.warn('[rollen] Lesen fehlgeschlagen', e);
    }

    // Fallback, wenn keine schools im Rollen-Dokument
    let allowedSchools = [];
    if (schoolsLcFromRole.length){
      allowedSchools = schoolsLcFromRole;
    } else if (schoolsFromRole.length){
      allowedSchools = schoolsFromRole.filter(s => CANON_SCHOOLS.includes(s));
    } else {
      allowedSchools = (DEFAULT_SCHOOLS_BY_GROUP[group] || []).filter(s => CANON_SCHOOLS.includes(s));
    }

    // persistente Wahl laden
    const stored = String(sessionStorage.getItem('activeSchool') || sessionStorage.getItem('school') || '')
                    .trim().toLowerCase();

    // aktive Schule (always lowercase)
    if (stored && (!allowedSchools.length || allowedSchools.includes(stored))){
      CURRENT_SCHOOL_ID = stored;
    } else if (allowedSchools.length === 1){
      CURRENT_SCHOOL_ID = allowedSchools[0];
    } else if (allowedSchools.length > 1){
      CURRENT_SCHOOL_ID = allowedSchools[0];
    } else {
      CURRENT_SCHOOL_ID = 'melsungen';
    }

    // persistieren: ab jetzt ist 'school' die gewählte Schule, nicht die Gruppe
    sessionStorage.setItem('activeSchool', CURRENT_SCHOOL_ID);
    sessionStorage.setItem('school', CURRENT_SCHOOL_ID);

    // Header aktualisieren
    applyHeaderBySchool(CURRENT_SCHOOL_ID);

    // Schulwahl UI
    const chooseBtn = $("#chooseSchoolBtn");
    const sel = $("#schoolSelect");
    if (allowedSchools.length > 1){
      chooseBtn.style.display = 'inline-block';
      sel.innerHTML = '';
      allowedSchools.forEach(s=>{
        const opt = document.createElement('option');
        opt.value = s; opt.textContent = DISPLAY(s);
        if (s === CURRENT_SCHOOL_ID) opt.selected = true;
        sel.appendChild(opt);
      });
      chooseBtn.onclick = ()=>{
        const shown = sel.style.display !== 'none';
        sel.style.display = shown ? 'none' : 'inline-block';
        if (!shown) sel.focus();
      };
      sel.onchange = ()=>{
        CURRENT_SCHOOL_ID = sel.value; // lowercase
        sessionStorage.setItem('activeSchool', CURRENT_SCHOOL_ID);
        sessionStorage.setItem('school', CURRENT_SCHOOL_ID);
        applyHeaderBySchool(CURRENT_SCHOOL_ID);
        renderList(auth.currentUser);
        sel.style.display = 'none';
      };
    } else {
      chooseBtn.style.display = 'none';
      sel.style.display = 'none';
    }

    // Debug-Button
    const dbgBtn = document.getElementById('debugBtn');
    if (DEBUG && dbgBtn){
      dbgBtn.style.display = 'inline-block';
      dbgBtn.onclick = () => dbgRunChecks(auth.currentUser, CURRENT_SCHOOL_ID);
      // Panel automatisch zeigen, wenn ?debug=1 ohne Klick:
      dbgShow(true);
      dbgRunChecks(auth.currentUser, CURRENT_SCHOOL_ID);
    }

    // Infozeile
    info.textContent = (user.email || '') + `  •  Schule: ${DISPLAY(CURRENT_SCHOOL_ID)}`;

    console.log('[Snackliste] Pfad:', `snacks/${CURRENT_SCHOOL_ID}/items`);
    renderList(user);
  });
  </script>
</body>
</html>
