<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WT-Ausbilder</title>
  <style>
    :root {
      --bg:#000; --text:#fff; --accent-bg:#fff; --accent-text:#000;
      --card:#111; --border:#333; --muted:#aaa; --hover:#1a1a1a; --red:#f44;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column}
    header{display:flex;justify-content:space-between;align-items:center;padding:10px 16px;border-bottom:1px solid var(--border)}
    header img{height:60px}
    main{display:flex;flex:1;min-height:0}

    /* ====== NAVIGATION ====== */
    nav{
      width:260px;background:var(--card);border-right:1px solid var(--border);
      padding:16px;display:flex;flex-direction:column;gap:8px;
      position:sticky;top:0;height:calc(100vh - 80px);overflow-y:auto;
      transition:transform .3s ease, opacity .3s ease;
    }
    nav.hidden{
      transform:translateX(-270px);
      opacity:0;
      pointer-events:none;
    }
    nav button, nav .submenu-toggle{
      background:transparent;color:var(--text);text-align:left;border:none;
      padding:10px 14px;font-size:15px;border-radius:8px;cursor:pointer;
      display:flex;align-items:center;gap:8px;width:100%;
      transition:background .15s,transform .1s;
    }
    nav button:hover, nav .submenu-toggle:hover{
      background:var(--hover);transform:translateX(2px);
    }
    .submenu{
      display:none;flex-direction:column;padding-left:16px;gap:4px;margin-top:4px;
    }
    .submenu button{font-size:14px;color:var(--muted);}
    .submenu.open{display:flex;}

    /* Mehrzeiliger Button für Check-In */
    #attendBtn {
      flex-direction:column;
      align-items:flex-start;
      line-height:1.2;
      font-weight:bold;
    }
    #attendBtn span:first-child { font-size:15px; }
    #attendBtn span:last-child {
      font-size:13px;
      color:var(--muted);
      margin-left:20px;
    }

    .logout-container{margin-top:auto;padding:12px;}
    .logout-btn{
      background:var(--red);color:#fff;border:none;border-radius:8px;
      padding:10px 20px;font-size:16px;font-weight:bold;cursor:pointer;width:100%;
    }
    .logout-btn:hover{background:#d22;}
    .settings-btn{
      background:transparent;color:var(--muted);
      display:flex;align-items:center;gap:8px;justify-content:center;
      border:none;padding:10px;font-size:15px;cursor:pointer;width:100%;
    }
    .settings-btn:hover{color:#fff;transform:rotate(5deg);}

    /* ====== CONTENT ====== */
    .content{flex:1;padding:24px;overflow:auto;display:flex;flex-direction:column;min-height:0;}
    .top-actions{
      display:flex;justify-content:flex-end;align-items:center;
      flex-wrap:wrap;gap:10px;margin-bottom:16px;width:100%;
    }
    .btn{background:var(--accent-bg);color:var(--accent-text);border:none;padding:10px 16px;border-radius:10px;font-weight:bold;cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,.3)}
    .btn.ghost{background:transparent;color:#fff;border:1px solid var(--border);box-shadow:none}
    .pill{
      background:#0b0b0b;color:#fff;border:1px solid var(--border);
      border-radius:999px;padding:8px 12px;font-size:14px;
      align-self:flex-end;margin-top:auto;
    }

    .ticker{margin-top:0;width:100%;overflow:hidden;border-radius:8px;border:1px solid var(--border);padding:10px;background:rgba(255,255,255,.05)}
    .ticker-inner{display:inline-block;white-space:nowrap;padding-left:100%;font-size:16px}
    @keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-100%)}}
    .ticker-inner.animate{animation:scroll linear infinite;animation-duration:12s}

    .calendar-wrap{margin:18px 0;width:100%;height:520px;display:none}
    .calendar-wrap iframe{width:100%;height:100%;border:none;border-radius:8px;background:#fff}

    /* Menübutton über dem Content */
    #menuToggleBtn{
      background:var(--accent-bg);
      color:var(--accent-text);
      border:none;
      border-radius:8px;
      padding:10px 16px;
      margin:10px 0;
      font-weight:bold;
      cursor:pointer;
      box-shadow:0 2px 6px rgba(0,0,0,.3);
      align-self:flex-start;
    }
  </style>
</head>
<body>
<header>
  <img id="logo-left" src="pluslogo.png" alt="Logo links">
  <img id="logo-center" src="faust.jpg" alt="Logo Mitte">
  <img id="logo-right" src="melsungen.jpg" alt="Logo rechts">
</header>

<!-- Menübutton -->
<button id="menuToggleBtn">Menü</button>

<main>
  <!-- ===== NAVIGATION ===== -->
  <nav id="navMenu">
    <button id="profileBtn">👤 Mein Profil</button>

    <button class="submenu-toggle" id="trainerToggle">📚 Trainer ▾</button>
    <div class="submenu" id="trainerSub">
      <button id="oneNoteBtn">📓 OneNote</button>
      <button id="templatesBtn">📂 Vorlagen</button>
      <button id="driveBtn">💾 Drive</button>
      <button onclick="location.href='links.html'">🧰 Trainingsausrüstung</button>
      <button onclick="location.href='spiele.html'">🎲 Spiele</button>
      <button onclick="location.href='bilder.html'">🖼️ Bilder</button>
      <button onclick="location.href='videos.html'">🎥 Videos</button>
      <button onclick="location.href='trainingszeiten.html'">🕒 Trainingszeiten</button>
      <button onclick="location.href='schuluebersicht.html'">🏫 Schulübersicht</button>
      <button onclick="location.href='anleitungen.html'">📖 Anleitungen</button>
      <button onclick="location.href='checkliste.html'">✅ Checkliste</button>
    </div>

    <button class="submenu-toggle" id="adminToggle" style="display:none;">🛠️ Admin ▾</button>
    <div class="submenu" id="adminSub">
      <button id="calendarBtn">📅 Kalender</button>
      <button onclick="location.href='registrierung.html'">🧾 Registrierung</button>
      <button onclick="location.href='session-admin.html'">🏋️‍♂️ Trainingstermin erstellen</button>
    </div>

    <button id="attendBtn" onclick="location.href='attend.html'">
      <span>✅ Ausbildertraining</span>
      <span>Check-In</span>
    </button>

    <button onclick="location.href='passwort-aendern.html'">🔑 Passwort ändern</button>

    <div class="logout-container">
      <button class="settings-btn" id="settingsBtn">⚙️ Einstellungen</button>
      <button class="logout-btn" id="logoutBtn">🚪 Logout</button>
    </div>
  </nav>

  <!-- ===== CONTENT ===== -->
  <div class="content" id="app" style="display:none">
    <div class="top-actions">
      <button class="btn ghost" id="chooseSchoolBtn" style="display:none">
        Schule: <span id="chooseSchoolLabel">MASTER</span>
      </button>
    </div>

    <div class="ticker"><div id="tickerInner" class="ticker-inner">Lade Newsticker…</div></div>

    <div class="calendar-wrap" id="calendarWrap">
      <iframe id="calendarFrame" src="about:blank" title="Trainingskalender"></iframe>
    </div>

    <span id="activeRolePill" class="pill" style="display:none"></span>
  </div>
</main>

<!-- ===== Firebase & JS ===== -->
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore-compat.js"></script>
<script src="firebase-config.js"></script>

<script>
if(!firebase.apps.length)firebase.initializeApp(window.firebaseConfig);
const auth=firebase.auth(),db=firebase.firestore();

/* Menü ein-/ausblenden */
const menuBtn=document.getElementById('menuToggleBtn');
const nav=document.getElementById('navMenu');
menuBtn.addEventListener('click',()=>nav.classList.toggle('hidden'));

/* Submenüs */
function setupToggle(t,s){const T=document.getElementById(t),S=document.getElementById(s);if(!T||!S)return;T.onclick=()=>S.classList.toggle('open');}
setupToggle('trainerToggle','trainerSub');
setupToggle('adminToggle','adminSub');
</script>
</body>
</html>
